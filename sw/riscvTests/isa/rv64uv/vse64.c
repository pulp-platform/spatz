#include "vector_macros.h"


//**********Checking functionality of vse64********//
void TEST_CASE1(void) {
  volatile uint64_t ALIGNED_I64[1024];
  VSET(16, e64, m2);
  VLOAD_64(v0, 0x9fe419208f2e05e0, 0xf9aa71f0c394bbd3, 0xa11a9384a7163840,
           0x99991348a9f38cd1, 0x9fa831c7a11a9384, 0x3819759853987548,
           0x1893179501093489, 0x81937598aa819388, 0x1874754791888188,
           0x3eeeeeeee33111ae, 0x9013930148815808, 0xab8b914891484891,
           0x9031850931584902, 0x3189759837598759, 0x8319599991911111,
           0x8913984898951989);
  asm volatile("vse64.v v0, (%0)" ::"r"(ALIGNED_I64));
  VVCMP_U64(1, ALIGNED_I64, 0x9fe419208f2e05e0, 0xf9aa71f0c394bbd3,
            0xa11a9384a7163840, 0x99991348a9f38cd1, 0x9fa831c7a11a9384,
            0x3819759853987548, 0x1893179501093489, 0x81937598aa819388,
            0x1874754791888188, 0x3eeeeeeee33111ae, 0x9013930148815808,
            0xab8b914891484891, 0x9031850931584902, 0x3189759837598759,
            0x8319599991911111, 0x8913984898951989);
}

//*******Checking functionality of vse64 with different values of masking
// register******//
void TEST_CASE2(void) {
  volatile uint64_t ALIGNED_I64[1024] = {0};
  VSET(16, e64, m2);
  VLOAD_64(v3, 0x9fe419208f2e05e0, 0xf9aa71f0c394bbd3, 0xa11a9384a7163840,
           0x99991348a9f38cd1, 0x9fa831c7a11a9384, 0x3819759853987548,
           0x1893179501093489, 0x81937598aa819388, 0x1874754791888188,
           0x3eeeeeeee33111ae, 0x9013930148815808, 0xab8b914891484891,
           0x9031850931584902, 0x3189759837598759, 0x8319599991911111,
           0x8913984898951989);
  VLOAD_8(v0, 0xFF, 0xFF);
  asm volatile("vse64.v v3, (%0), v0.t" ::"r"(ALIGNED_I64));
  VCLEAR(v3);
  VVCMP_U64(2, ALIGNED_I64, 0x9fe419208f2e05e0, 0xf9aa71f0c394bbd3,
            0xa11a9384a7163840, 0x99991348a9f38cd1, 0x9fa831c7a11a9384,
            0x3819759853987548, 0x1893179501093489, 0x81937598aa819388,
            0x1874754791888188, 0x3eeeeeeee33111ae, 0x9013930148815808,
            0xab8b914891484891, 0x9031850931584902, 0x3189759837598759,
            0x8319599991911111, 0x8913984898951989);
}

void TEST_CASE3(void) {
  volatile uint64_t ALIGNED_I64[1024] = {0};
  VSET(16, e64, m2);
  VLOAD_64(v3, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16);
  asm volatile("vse64.v v3, (%0)" ::"r"(ALIGNED_I64));
  VCLEAR(v3);
  VLOAD_64(v3, 0x9fe419208f2e05e0, 0xf9aa71f0c394bbd3, 0xa11a9384a7163840,
           0x99991348a9f38cd1, 0x9fa831c7a11a9384, 0x3819759853987548,
           0x1893179501093489, 0x81937598aa819388, 0x1874754791888188,
           0x3eeeeeeee33111ae, 0x9013930148815808, 0xab8b914891484891,
           0x9031850931584902, 0x3189759837598759, 0x8319599991911111,
           0x8913984898951989);
  VLOAD_8(v0, 0x00, 0x00);
  asm volatile("vse64.v v3, (%0), v0.t" ::"r"(ALIGNED_I64));
  VCLEAR(v3);
  VVCMP_U64(3, ALIGNED_I64, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,
            16);
}

void TEST_CASE4(void) {
  volatile uint64_t ALIGNED_I64[1024] = {0};
  VSET(16, e64, m2);
  VLOAD_64(v3, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16);
  asm volatile("vse64.v v3, (%0)" ::"r"(ALIGNED_I64));
  VCLEAR(v3);
  VLOAD_64(v3, 0x9fe419208f2e05e0, 0xf9aa71f0c394bbd3, 0xa11a9384a7163840,
           0x99991348a9f38cd1, 0x9fa831c7a11a9384, 0x3819759853987548,
           0x1893179501093489, 0x81937598aa819388, 0x1874754791888188,
           0x3eeeeeeee33111ae, 0x9013930148815808, 0xab8b914891484891,
           0x9031850931584902, 0x3189759837598759, 0x8319599991911111,
           0x8913984898951989);
  VLOAD_8(v0, 0xAA, 0xAA);
  asm volatile("vse64.v v3, (%0), v0.t" ::"r"(ALIGNED_I64));
  VCLEAR(v3);
  VVCMP_U64(4, ALIGNED_I64, 1, 0xf9aa71f0c394bbd3, 3, 0x99991348a9f38cd1, 5,
            0x3819759853987548, 7, 0x81937598aa819388, 9, 0x3eeeeeeee33111ae,
            11, 0xab8b914891484891, 13, 0x3189759837598759, 15,
            0x8913984898951989);
}

// change LMUL and EW
void TEST_CASE5(void) {
  volatile uint64_t ALIGNED_I64[1024] = {0};
  VSET(16, e64, m2);
  VLOAD_64(v8, 0x9fe419208f2e05e0, 0xf9aa71f0c394bbd3, 0xa11a9384a7163840,
           0x99991348a9f38cd1, 0x9fa831c7a11a9384, 0x3819759853987548,
           0x1893179501093489, 0x81937598aa819388, 0x1874754791888188,
           0x3eeeeeeee33111ae, 0x9013930148815808, 0xab8b914891484891,
           0x9031850931584902, 0x3189759837598759, 0x8319599991911111,
           0x8913984898951989);
  VSET(16, e8, m1);
  asm volatile("vse64.v v8, (%0)" ::"r"(ALIGNED_I64));
  VCLEAR(v8);
  VVCMP_U64(10, ALIGNED_I64, 0x9fe419208f2e05e0, 0xf9aa71f0c394bbd3,
            0xa11a9384a7163840, 0x99991348a9f38cd1, 0x9fa831c7a11a9384,
            0x3819759853987548, 0x1893179501093489, 0x81937598aa819388,
            0x1874754791888188, 0x3eeeeeeee33111ae, 0x9013930148815808,
            0xab8b914891484891, 0x9031850931584902, 0x3189759837598759,
            0x8319599991911111, 0x8913984898951989);
}


int main(void) {
  INIT_CHECK();
  enable_vec();

  TEST_CASE1();
  TEST_CASE2();
  TEST_CASE3();
  TEST_CASE4();
  TEST_CASE5();

  EXIT_CHECK();
}